<div class="profile-image-cropper">
  <div class="profile-image-actions">
    <input
      type="file"
      #fileInput
      (change)="onFileSelected($event)"
      accept="image/png,image/jpeg,image/jpg,image/webp"
      style="display:none;"
    />

    <button type="button" class="btn btn-outline-secondary" (click)="fileInput.click()" [disabled]="isUploading">
      انتخاب عکس
    </button>

    <button type="button" class="btn btn-outline-primary" (click)="reset()" [disabled]="isUploading">
      حذف عکس
    </button>
  </div>

  <div class="profile-image-status" *ngIf="error">
    <small class="text-danger">{{ error }}</small>
  </div>

  <div class="profile-image-status" *ngIf="message">
    <small class="text-success">{{ message }}</small>
  </div>

  <div class="profile-image-progress" *ngIf="isUploading">
    <div class="progress" style="height: 8px;">
      <div class="progress-bar" role="progressbar" [style.width.%]="progress"></div>
    </div>
    <small class="text-muted">{{ progress }}%</small>
  </div>

  <div class="profile-image-body">
    <div class="profile-image-preview">
      <img
        class="preview-img"
        [class.round]="roundCropper"
        [src]="(croppedImageUrl || initialImageUrl || 'assets/img/avatar.png')"
        alt="Profile preview"
        (error)="onImageError($event)"
      />
    </div>
  </div>
</div>
