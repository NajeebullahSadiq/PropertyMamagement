<section class="w-full">
    <div class="max-w-7xl mx-auto">
        <div class="bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden">
            <div class="px-6 py-8 sm:px-8 sm:py-10">

                <div class="flex flex-col items-center mb-8">
                    <img [src]="imagePath" class="w-32 h-32 rounded-full object-cover shadow-lg border-4 border-gray-200 mb-4" alt="Buyer Image">
                    <h1 class="text-3xl font-bold text-center text-gray-800">ثبت مشخصات مشتری ملکیت</h1>
                </div>

                <div class="mb-6">
                    <app-profile-image-cropper
                      #childComponent
                      [initialImageUrl]="imagePath"
                      documentType="profile"
                      [roundCropper]="true"
                      (imageChanged)="profilePreviewChanged($event)"
                      (imageUploaded)="profileImageUploaded($event)"
                      style="text-align:left;"
                    ></app-profile-image-cropper>
                </div>
                
                <div class="mb-8">
                    <h2 class="text-lg font-bold text-blue-600 mb-3">آپلود تذکره ملی (الزامی)</h2>
                    <app-nationalid-upload #nationalIdComponent (sendMessage)="nationalIdUploadFinished($event)" style="text-align:left;"></app-nationalid-upload>
                    <div *ngIf="nationalIdCard?.invalid && (nationalIdCard?.dirty || nationalIdCard?.touched)">
                        <small class="text-red-600 text-xs mt-1 block" *ngIf="nationalIdCard?.errors?.['required']">آپلود تذکره ملی الزامی است</small>
                    </div>
                </div>

                <form [formGroup]="sellerForm"
                    (ngSubmit)="sellerForm.valid ? selectedSellerId ? updateBuyerDetails() : addBuyerDetail() : null">
                    <div class="hidden">
                        <input type="hidden" formControlName="id">
                    </div>

                    <div class="mb-6" *ngIf="duplicateError">
                        <div class="bg-red-50 border-l-4 border-red-500 p-4 rounded-r-lg" role="alert">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <i class="fas fa-exclamation-circle text-red-500 ml-3"></i>
                                    <span class="text-red-800 font-medium">{{ duplicateError }}</span>
                                </div>
                                <button type="button" class="text-red-500 hover:text-red-700" (click)="duplicateError = ''" aria-label="Close">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <div>
                            <label for="roleType" class="block text-sm font-semibold text-gray-700 mb-2">نوعیت عاقد</label>
                            <div class="relative">
                                <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">
                                    <i class="fas fa-user-tag"></i>
                                </span>
                                <select id="roleType" class="w-full px-4 py-2.5 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" formControlName="roleType">
                                    <option *ngFor="let role of roleTypes" [value]="role.value">{{ role.label }}</option>
                                </select>
                            </div>
                            <div *ngIf="roleType?.invalid && (roleType?.dirty || roleType?.touched)">
                                <small class="text-red-600 text-xs mt-1 block" *ngIf="roleType?.errors?.['required']">این فیلد الزامی است</small>
                            </div>
                        </div>
                        <div *ngIf="allowsMultipleBuyers()" class="flex items-center">
                            <div class="bg-blue-50 border border-blue-200 rounded-lg p-3 w-full">
                                <div class="flex items-center">
                                    <i class="fas fa-info-circle text-blue-600 ml-2"></i>
                                    <span class="text-blue-800 font-semibold">می‌توانید چندین خریدار اضافه کنید</span>
                                </div>
                            </div>
                        </div>
                        <div *ngIf="isSingularRole()" class="flex items-center">
                            <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-3 w-full">
                                <div class="flex items-center">
                                    <i class="fas fa-exclamation-triangle text-yellow-600 ml-2"></i>
                                    <span class="text-yellow-800 font-semibold">فقط یک خریدار مجاز است</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="mb-8" *ngIf="isAuthorizedAgent()">
                        <h2 class="text-lg font-bold text-red-600 mb-3">آپلود وکالت نامه (الزامی)</h2>
                        <app-upload #authLetterComponent (sendMessage)="authorizationLetterUploadFinished($event)" style="text-align:left;"></app-upload>
                        <div *ngIf="authorizationLetter?.invalid && (authorizationLetter?.dirty || authorizationLetter?.touched)">
                            <small class="text-red-600 text-xs mt-1 block" *ngIf="authorizationLetter?.errors?.['required']">آپلود وکالت نامه الزامی است</small>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6" *ngIf="isLesseeRole()">
                        <div>
                            <label for="rentStartDate" class="block text-sm font-semibold text-gray-700 mb-2">تاریخ شروع کرایه</label>
                            <div class="relative">
                                <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">
                                    <i class="fas fa-calendar-alt"></i>
                                </span>
                                <input type="date" id="rentStartDate" class="w-full px-4 py-2.5 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" formControlName="rentStartDate">
                            </div>
                            <div *ngIf="rentStartDate?.invalid && (rentStartDate?.dirty || rentStartDate?.touched)">
                                <small class="text-red-600 text-xs mt-1 block" *ngIf="rentStartDate?.errors?.['required']">تاریخ شروع کرایه الزامی است</small>
                            </div>
                        </div>
                        <div>
                            <label for="rentEndDate" class="block text-sm font-semibold text-gray-700 mb-2">تاریخ ختم کرایه</label>
                            <div class="relative">
                                <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">
                                    <i class="fas fa-calendar-alt"></i>
                                </span>
                                <input type="date" id="rentEndDate" class="w-full px-4 py-2.5 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" formControlName="rentEndDate">
                            </div>
                            <div *ngIf="rentEndDate?.invalid && (rentEndDate?.dirty || rentEndDate?.touched)">
                                <small class="text-red-600 text-xs mt-1 block" *ngIf="rentEndDate?.errors?.['required']">تاریخ ختم کرایه الزامی است</small>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <div>
                            <label for="firstName" class="block text-sm font-semibold text-gray-700 mb-2">نام</label>
                            <div class="relative">
                                <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">
                                    <i class="fas fa-file-alt"></i>
                                </span>
                                <input type="text" id="firstName" class="w-full px-4 py-2.5 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
                                    formControlName="firstName">
                            </div>
                            <div *ngIf="firstName?.invalid && (firstName?.dirty || firstName?.touched)">
                                <small class="text-red-600 text-xs mt-1 block" *ngIf="firstName?.errors?.['required']">این فیلد الزامی است</small>
                            </div>
                        </div>
                        <div>
                            <label for="fatherName" class="block text-sm font-semibold text-gray-700 mb-2">نام پدر</label>
                            <div class="relative">
                                <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">
                                    <i class="fas fa-file-alt"></i>
                                </span>
                                <input type="text" id="fatherName" class="w-full px-4 py-2.5 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
                                    formControlName="fatherName">
                            </div>
                            <div *ngIf="fatherName?.invalid && (fatherName?.dirty || fatherName?.touched)">
                                <small class="text-red-600 text-xs mt-1 block" *ngIf="fatherName?.errors?.['required']">این فیلد الزامی است</small>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <div>
                            <label for="grandFather" class="block text-sm font-semibold text-gray-700 mb-2">نام پدر کلان</label>
                            <div class="relative">
                                <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">
                                    <i class="fas fa-file-alt"></i>
                                </span>
                                <input type="text" id="grandFather" class="w-full px-4 py-2.5 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
                                    formControlName="grandFather">
                            </div>
                            <div *ngIf="grandFather?.invalid && (grandFather?.dirty || grandFather?.touched)">
                                <small class="text-red-600 text-xs mt-1 block" *ngIf="grandFather?.errors?.['required']">این فیلد الزامی است</small>
                            </div>
                        </div>
                        <div>
                            <label for="tazkiraType" class="block text-sm font-semibold text-gray-700 mb-2">نوع تذکره</label>
                            <div class="relative">
                                <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">
                                    <i class="fas fa-id-card"></i>
                                </span>
                                <select id="tazkiraType" class="w-full px-4 py-2.5 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" formControlName="tazkiraType">
                                    <option value="">انتخاب کنید</option>
                                    <option value="Electronic">تذکره الکترونیکی</option>
                                    <option value="Paper">تذکره کاغذی</option>
                                </select>
                            </div>
                            <div *ngIf="tazkiraType?.invalid && (tazkiraType?.dirty || tazkiraType?.touched)">
                                <small class="text-red-600 text-xs mt-1 block" *ngIf="tazkiraType?.errors?.['required']">این فیلد الزامی است</small>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <div>
                            <label for="indentityCardNumber" class="block text-sm font-semibold text-gray-700 mb-2">شماره تذکره</label>
                            <div class="relative">
                                <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">
                                    <i class="fas fa-file-alt"></i>
                                </span>
                                <input type="text" (keypress)="onlyNumberKey($event)" id="indentityCardNumber" class="w-full px-4 py-2.5 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
                                    formControlName="indentityCardNumber">
                            </div>
                            <div *ngIf="indentityCardNumber?.invalid && (indentityCardNumber?.dirty || indentityCardNumber?.touched)">
                                <small class="text-red-600 text-xs mt-1 block" *ngIf="indentityCardNumber?.errors?.['required']">این فیلد الزامی است</small>
                            </div>
                        </div>
                        <div>
                            <label for="phoneNumber" class="block text-sm font-semibold text-gray-700 mb-2">شماره موبایل</label>
                            <div class="relative">
                                <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">
                                    <i class="fas fa-file-alt"></i>
                                </span>
                                <input type="text" (keypress)="onlyNumberKey($event)" id="phoneNumber" class="w-full px-4 py-2.5 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
                                    formControlName="phoneNumber">
                            </div>
                            <div *ngIf="phoneNumber?.invalid && (phoneNumber?.dirty || phoneNumber?.touched)">
                                <small class="text-red-600 text-xs mt-1 block" *ngIf="phoneNumber?.errors?.['required']">این فیلد الزامی است</small>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8" *ngIf="isPaperTazkira()">
                        <div>
                            <label for="tazkiraVolume" class="block text-sm font-semibold text-gray-700 mb-2">جلد</label>
                            <div class="relative">
                                <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">
                                    <i class="fas fa-book"></i>
                                </span>
                                <input type="text" id="tazkiraVolume" class="w-full px-4 py-2.5 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
                                    formControlName="tazkiraVolume">
                            </div>
                            <div *ngIf="tazkiraVolume?.invalid && (tazkiraVolume?.dirty || tazkiraVolume?.touched)">
                                <small class="text-red-600 text-xs mt-1 block" *ngIf="tazkiraVolume?.errors?.['required']">این فیلد الزامی است</small>
                            </div>
                        </div>
                        <div>
                            <label for="tazkiraPage" class="block text-sm font-semibold text-gray-700 mb-2">صفحه</label>
                            <div class="relative">
                                <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">
                                    <i class="fas fa-file"></i>
                                </span>
                                <input type="text" id="tazkiraPage" class="w-full px-4 py-2.5 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
                                    formControlName="tazkiraPage">
                            </div>
                            <div *ngIf="tazkiraPage?.invalid && (tazkiraPage?.dirty || tazkiraPage?.touched)">
                                <small class="text-red-600 text-xs mt-1 block" *ngIf="tazkiraPage?.errors?.['required']">این فیلد الزامی است</small>
                            </div>
                        </div>
                        <div>
                            <label for="tazkiraNumber" class="block text-sm font-semibold text-gray-700 mb-2"> ثبت نمبر</label>
                            <div class="relative">
                                <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500">
                                    <i class="fas fa-hashtag"></i>
                                </span>
                                <input type="text" id="tazkiraNumber" class="w-full px-4 py-2.5 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
                                    formControlName="tazkiraNumber">
                            </div>
                            <div *ngIf="tazkiraNumber?.invalid && (tazkiraNumber?.dirty || tazkiraNumber?.touched)">
                                <small class="text-red-600 text-xs mt-1 block" *ngIf="tazkiraNumber?.errors?.['required']">این فیلد الزامی است</small>
                            </div>
                        </div>
                    </div>

                    <div class="mb-8">
                        <h2 class="text-xl font-bold text-gray-800 mb-6 pb-3 border-b-2 border-gray-100">سکونت اصلی</h2>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">ولایت</label>
                                <ng-select formControlName="paddressProvinceId" [items]="province" [selectOnTab]="true"
                                  bindLabel="dari" bindValue="id" (change)="filterResults($event)" class="custom-ng-select">
                                </ng-select>
                              </div>
                            <div>
                                <label class="block text-sm font-semibold text-gray-700 mb-2">ناحیه/ولسوالی</label>
                                <ng-select formControlName="paddressDistrictId" [items]="district" [selectOnTab]="true"
                                  bindLabel="dari" bindValue="id" class="custom-ng-select">
                                </ng-select>
                              </div>
                            <div>
                                <label for="paddressVillage" class="block text-sm font-semibold text-gray-700 mb-2">قریهګذر / قریه / ادرس بلاک</label>
                                <div class="relative">
                                    <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500"><i class="fas fa-file-alt"></i></span>
                                        <input type="text" id="paddressVillage" class="w-full px-4 py-2.5 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
                                            formControlName="paddressVillage">
                                    </div>
                                    <div *ngIf="paddressVillage?.invalid && (paddressVillage?.dirty || paddressVillage?.touched)">
                                        <small class="text-red-600 text-xs mt-1 block" *ngIf="paddressVillage?.errors?.['required']">این فیلد الزامی است</small>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mb-8">
                            <h2 class="text-xl font-bold text-gray-800 mb-6 pb-3 border-b-2 border-gray-100">سکونت فعلی</h2>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">ولایت</label>
                                    <ng-select formControlName="taddressProvinceId" [items]="province" [selectOnTab]="true"
                                      bindLabel="dari" bindValue="id" (change)="filterResults2($event)" class="custom-ng-select">
                                    </ng-select>
                                  </div>
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">ناحیه/ولسوالی</label>
                                    <ng-select formControlName="taddressDistrictId" [items]="district2" [selectOnTab]="true"
                                      bindLabel="dari" bindValue="id" class="custom-ng-select">
                                    </ng-select>
                                  </div>
                                <div>
                                    <label for="taddressVillage" class="block text-sm font-semibold text-gray-700 mb-2">ګذر / قریه / ادرس بلاک</label>
                                    <div class="relative">
                                        <span class="absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500"><i class="fas fa-file-alt"></i></span>
                                        <input type="text" id="taddressVillage" class="w-full px-4 py-2.5 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"
                                            formControlName="taddressVillage">
                                    </div>
                                    <div *ngIf="taddressVillage?.invalid && (taddressVillage?.dirty || taddressVillage?.touched)">
                                        <small class="text-red-600 text-xs mt-1 block" *ngIf="taddressVillage?.errors?.['required']">این فیلد الزامی است</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-8">
                            <h2 class="text-xl font-bold text-gray-800 mb-6 pb-3 border-b-2 border-gray-100">معلومات معاملہ</h2>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                                    <div class="col-md-4">
                                        <label class="form-label me-3">نوعیت معامله</label>
                                        <ng-select formControlName="transactionType" [items]="transactionTypes" [selectOnTab]="true"
                                          bindLabel="label" bindValue="value">
                                        </ng-select>
                                        <div *ngIf="transactionType?.invalid && (transactionType?.dirty || transactionType?.touched)">
                                            <small class="text-danger" *ngIf="transactionType?.errors?.['required']">این فیلد الزامی است</small>
                                        </div>
                                    </div>
                                    <div class="col-md-4" *ngIf="isOtherTransactionType()">
                                        <label for="transactionTypeDescription" class="form-label">توضیح سایر</label>
                                        <div class="input-group">
                                            <span class="input-group-text"><i class="fas fa-edit"></i></span>
                                            <input type="text" id="transactionTypeDescription" class="form-control" formControlName="transactionTypeDescription">
                                        </div>
                                        <div *ngIf="transactionTypeDescription?.invalid && (transactionTypeDescription?.dirty || transactionTypeDescription?.touched)">
                                            <small class="text-danger" *ngIf="transactionTypeDescription?.errors?.['required']">این فیلد الزامی است</small>
                                        </div>
                                    </div>
                                    <div class="col-md-4" *ngIf="showPriceFields()">
                                        <label for="price" class="form-label">{{ getPriceNumberLabel() }}</label>
                                        <div class="input-group">
                                            <span class="input-group-text"><i class="fas fa-money-bill-alt"></i></span>
                                            <input type="number" (keypress)="onlyNumberKey($event)" id="price" class="form-control" formControlName="price">
                                        </div>
                                        <div *ngIf="price?.invalid && (price?.dirty || price?.touched)">
                                            <small class="text-danger" *ngIf="price?.errors?.['required']">این فیلد الزامی است</small>
                                        </div>
                                    </div>
                                    <div class="col-md-4" *ngIf="showPriceFields()">
                                        <label for="priceText" class="form-label">{{ getPriceTextLabel() }}</label>
                                        <div class="input-group">
                                            <span class="input-group-text"><i class="fas fa-money-bill-alt"></i></span>
                                            <input type="text" id="priceText" class="form-control" formControlName="priceText">
                                        </div>
                                        <div *ngIf="priceText?.invalid && (priceText?.dirty || priceText?.touched)">
                                            <small class="text-danger" *ngIf="priceText?.errors?.['required']">این فیلد الزامی است</small>
                                        </div>
                                    </div>
                                </div>
                              
                                <div class="row mt-3">
                                    <div class="col-md-4">
                                        <label for="halfPrice" class="form-label">مناصفه قیمت</label>
                                        <div class="input-group">
                                            <span class="input-group-text"><i class="fas fa-money-bill-alt"></i></span>
                                            <input type="number" id="halfPrice" class="form-control" formControlName="halfPrice" readonly>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <label for="royaltyAmount" class="form-label">مبلغ حق ‌العمل رهنمای معاملات </label>
                                        <div class="input-group">
                                            <span class="input-group-text"><i class="fas fa-money-bill-alt"></i></span>
                                            <input type="number" id="royaltyAmount" class="form-control" formControlName="royaltyAmount" readonly>
                                        </div>
                                    </div>
                                    
                                </div>
                                  <div class="row mt-3">
                                    <div class="col-md-4">
                                        <label for="taxIdentificationNumber" class="form-label">نمبر تشخیصیه</label>
                                        <div class="input-group">
                                            <span class="input-group-text"><i class="fas fa-id-card"></i></span>
                                            <input type="text" id="taxIdentificationNumber" class="form-control" formControlName="taxIdentificationNumber">
                                        </div>
                                    </div>
                                    <div class="col-md-8">
                                        <label for="additionalDetails" class="form-label">جزییات دیگر</label>
                                        <div class="input-group">
                                            <span class="input-group-text"><i class="fas fa-align-left"></i></span>
                                            <textarea id="additionalDetails" class="form-control" formControlName="additionalDetails" rows="3"></textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        <br>
                        <div class="flex flex-wrap gap-3 pt-6 border-t border-gray-200">
                            <button type="submit" [disabled]="sellerForm.invalid" class="px-6 py-3 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-semibold rounded-lg shadow-md hover:shadow-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed">
                                {{selectedSellerId ? 'تغیر معلومات' : 'ثبت معلومات'}}
                            </button>
                            <button type="reset" class="px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-semibold rounded-lg shadow-md hover:shadow-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed" [disabled]="isSingularRole() && sellerDetails && sellerDetails.length > 0" [attr.title]="isSingularRole() && sellerDetails && sellerDetails.length > 0 ? 'فقط یک خریدار مجاز است' : null" (click)="resetChild()">
                                ثبت جدید
                            </button>
                            <button
                              type="button"
                              *ngIf="allowsMultipleBuyers() && sellerDetails && sellerDetails.length > 0"
                              class="px-6 py-3 bg-gradient-to-r from-cyan-500 to-cyan-600 hover:from-cyan-600 hover:to-cyan-700 text-white font-semibold rounded-lg shadow-md hover:shadow-lg transition-all duration-300 flex items-center gap-2"
                              (click)="onNextClick()"
                            >
                              <i class="fas fa-arrow-left"></i>
                              <span>مرحله بعدی</span>
                            </button>
                        </div>
                        </form>
                
                <div class="mt-8 bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden">
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50 border-b border-gray-200">
                              <tr class="text-center">
                                <th class="px-4 py-3 text-sm font-semibold text-gray-700">آی دی</th>
                                <th class="px-4 py-3 text-sm font-semibold text-gray-700">نام</th>
                                <th class="px-4 py-3 text-sm font-semibold text-gray-700">نام پدر</th>
                                <th class="px-4 py-3 text-sm font-semibold text-gray-700">نام پدر کلان</th>
                                <th class="px-4 py-3 text-sm font-semibold text-gray-700">شماره تذکره</th>
                                <th class="px-4 py-3 text-sm font-semibold text-gray-700">شماره موبایل</th>
                                <th class="px-4 py-3 text-sm font-semibold text-gray-700">نوعیت عاقد</th>
                                <th class="px-4 py-3 text-sm font-semibold text-gray-700">عملیات</th>
                              </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200">
                              <tr *ngFor="let b of sellerDetails" class="text-center hover:bg-gray-50 transition-colors">
                                <td (click)="BindValue(b.id)" class="px-4 py-3 text-sm text-gray-700 cursor-pointer">{{ b.id }}</td>
                                <td (click)="BindValue(b.id)" class="px-4 py-3 text-sm text-gray-700 cursor-pointer">{{ b.firstName }}</td>
                                <td (click)="BindValue(b.id)" class="px-4 py-3 text-sm text-gray-700 cursor-pointer">{{ b.fatherName }}</td>
                                <td (click)="BindValue(b.id)" class="px-4 py-3 text-sm text-gray-700 cursor-pointer">{{ b.grandFather }}</td>
                                <td (click)="BindValue(b.id)" class="px-4 py-3 text-sm text-gray-700 cursor-pointer">{{ b.indentityCardNumber }}</td>
                                <td (click)="BindValue(b.id)" class="px-4 py-3 text-sm text-gray-700 cursor-pointer">{{ b.phoneNumber }}</td>
                                <td (click)="BindValue(b.id)" class="px-4 py-3 text-sm text-gray-700 cursor-pointer">{{ getRoleTypeLabel(b.roleType) }}</td>
                                <td class="px-4 py-3">
                                  <button class="px-3 py-1.5 bg-red-500 hover:bg-red-600 text-white text-sm font-medium rounded-lg transition-colors" (click)="deleteBuyer(b.id)">حذف</button>
                                </td>
                              </tr>
                              <tr *ngIf="!sellerDetails || sellerDetails.length === 0">
                                <td colspan="8" class="px-4 py-8 text-center text-gray-500">هیچ خریداری ثبت نشده است</td>
                              </tr>
                            </tbody>
                          </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
