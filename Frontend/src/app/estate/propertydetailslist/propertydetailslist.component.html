<div class="w-full">
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6 pt-8">
    <div>
      <div class="flex gap-2">
        <input type="text" class="flex-1 px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all" [(ngModel)]="searchTerm" placeholder="جستجو..." aria-label="Search">
        <button class="px-6 py-2.5 bg-gray-700 hover:bg-gray-800 text-white font-medium rounded-lg transition-all duration-300 shadow-md hover:shadow-lg" type="button" (click)="onSearch()">
          <i class="fas fa-search ml-2"></i>
          جستجو
        </button>
      </div>
    </div>
    <div class="flex items-center justify-end gap-3">
      <label for="tableSize" class="text-sm font-semibold text-gray-700 whitespace-nowrap">تعداد ردیف ها:</label>
      <select id="tableSize" class="px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all min-w-[100px]" [(ngModel)]="tableSize" (change)="onTableSizeChange($event)">
        <option *ngFor="let size of tableSizes" [value]="size">{{ size }}</option>
      </select>
    </div>
  </div>

  <div class="bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden">
    <div class="overflow-x-auto">
      <table class="w-full">
        <thead class="bg-gradient-to-r from-gray-50 to-gray-100 border-b-2 border-gray-200">
          <tr class="text-center">
            <th class="px-4 py-4 text-sm font-bold text-gray-700">شماره مسلسل</th>
            <th class="px-4 py-4 text-sm font-bold text-gray-700">نوع ملکیت</th>
            <th class="px-4 py-4 text-sm font-bold text-gray-700">نوع معامله</th>
            <th class="px-4 py-4 text-sm font-bold text-gray-700">فروشنده</th>
            <th class="px-4 py-4 text-sm font-bold text-gray-700">خریدار</th>
            <th class="px-4 py-4 text-sm font-bold text-gray-700">حالت</th>
            <th class="px-4 py-4 text-sm font-bold text-gray-700">جزئیات و تغیر</th>
            <th class="px-4 py-4 text-sm font-bold text-gray-700">چاپ رسید</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-200">
          <tr *ngFor="let property of filteredProperties | paginate: { itemsPerPage: tableSize, currentPage: page, totalItems: count }; let i = index" class="text-center hover:bg-blue-50 transition-colors">
            <td class="px-4 py-3 text-sm text-gray-700 font-medium">{{ (page - 1) * tableSize + i + 1 }}</td>
            <td class="px-4 py-3 text-sm text-gray-700">{{ property.propertyTypeText }}</td>
            <td class="px-4 py-3 text-sm text-gray-700">{{ property.transactionTypeText }}</td>
            <td class="px-4 py-3 text-sm" [ngClass]="property.sellerName ? 'text-gray-700' : 'text-red-600 font-semibold'">
              {{ property.sellerName ? property.sellerName : 'تکیمل ناشده' }}
            </td>
            <td class="px-4 py-3 text-sm" [ngClass]="property.buyerName ? 'text-gray-700' : 'text-red-600 font-semibold'">
              {{ property.buyerName ? property.buyerName : 'تکیمل ناشده' }}
            </td>
            <td class="px-4 py-3">
              <span *ngIf="property.iscomplete; else notCompleted">
                <i class="fas fa-check-circle text-green-500 text-lg"></i>
              </span>
              <ng-template #notCompleted>
                <i class="fas fa-times-circle text-red-500 text-lg"></i>
              </ng-template>
            </td>
            <td class="px-4 py-3">
              <button class="px-3 py-1.5 border-2 border-gray-300 hover:border-blue-500 hover:bg-blue-50 text-gray-700 hover:text-blue-600 rounded-lg transition-all duration-300" (click)="onEdit(property.id)">
                <i class="fas fa-edit"></i>
              </button>
            </td>
            <td class="px-4 py-3">
              <button [disabled]="!property.iscomplete" class="px-3 py-1.5 border-2 border-gray-300 hover:border-green-500 hover:bg-green-50 text-gray-700 hover:text-green-600 rounded-lg transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed" (click)="onPrint(property.id)">
                <i class="fas fa-print"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="flex justify-center mt-6">
    <pagination-controls (pageChange)="onTableDataChange($event)" [previousLabel]="'قبلی'" [nextLabel]="'بعدی'"></pagination-controls>
  </div>
</div>
