# سیستم شماره‌گذاری جواز بر اساس ولایت
# د ولایت پر بنسټ د جواز شمېره ورکولو سیستم

## خلاصه / لنډیز
این سیستم برای هر یک از ۳۴ ولایت افغانستان شماره‌های جواز مجزا و منحصر به فرد تولید می‌کند.

دا سیستم د افغانستان د ۳۴ ولایتونو لپاره جلا او ځانګړې د جواز شمېرې تولیدوي.

## فورمت شماره جواز / د جواز شمېرې بڼه

**فورمت:** `کود_ولایت-شماره_ترتیبی`

**مثال‌ها / مثالونه:**
- کابل: `KBL-0001`, `KBL-0002`, `KBL-2234`
- کندهار: `KHR-0001`, `KHR-0002`
- هرات: `HRT-0001`, `HRT-0234`

## کودهای ولایات / د ولایتونو کوډونه

| ولایت | کود | ولایت | کود | ولایت | کود |
|-------|-----|-------|-----|-------|-----|
| کابل | KBL | هرات | HRT | کندهار | KHR |
| بلخ | BLK | ننگرهار | NGR | غزنی | GHZ |
| هلمند | HLM | بدخشان | BDK | تخار | TKR |
| کندز | KDZ | بغلان | BGL | بامیان | BMN |
| فراه | FRH | فاریاب | FRB | غور | GHR |
| جوزجان | JWZ | کاپیسا | KPS | خوست | KHT |
| کنر | KNR | لغمان | LGM | لوگر | LGR |
| نیمروز | NMZ | نورستان | NRS | پکتیا | PKT |
| پکتیکا | PKK | پنجشیر | PNJ | پروان | PRW |
| سمنگان | SMG | سرپل | SRP | ارزگان | URZ |
| وردک | WRD | زابل | ZBL | بادغیس | BDG |
| دایکندی | DYK |

## چگونه کار می‌کند / څنګه کار کوي

### ایجاد جواز جدید / نوی جواز جوړول

1. **کاربر ولایت را انتخاب می‌کند** / کارن ولایت ټاکي
2. **سیستم به طور خودکار شماره جواز تولید می‌کند** / سیستم په اتوماتیک ډول د جواز شمېره تولیدوي
3. **شماره‌گذاری از ۰۰۰۱ برای هر ولایت شروع می‌شود** / شمېره ورکول د هر ولایت لپاره له ۰۰۰۱ څخه پیلیږي
4. **شماره جواز ذخیره می‌شود** / د جواز شمېره خوندي کیږي

### مثال عملی / عملي مثال

```
عمل کاربر: انتخاب ولایت "کابل"
کارن عمل: د "کابل" ولایت ټاکل

سیستم: آخرین شماره جواز کابل را بررسی می‌کند
سیستم: د کابل وروستۍ د جواز شمېره ګوري

سیستم: "KBL-0234" را پیدا می‌کند
سیستم: "KBL-0234" پیدا کوي

سیستم: "KBL-0235" تولید می‌کند
سیستم: "KBL-0235" تولیدوي

سیستم: جواز با شماره "KBL-0235" ذخیره می‌شود
سیستم: د "KBL-0235" شمېرې سره جواز خوندي کوي
```

## مزایا / ګټې

### ۱. شناسایی منحصر به فرد / ځانګړې پیژندنه
هر ولایت دارای ترتیب شماره‌گذاری مخصوص خود است.
هر ولایت خپل ځانګړی د شمېرې ورکولو ترتیب لري.

### ۲. پیگیری آسان / اسانه تعقیب
به سرعت می‌توان تشخیص داد که جواز از کدام ولایت صادر شده است.
په چټکۍ سره معلومیدای شي چې جواز له کوم ولایت څخه صادر شوی دی.

### ۳. قابلیت گسترش / پراخیدو وړتیا
از تعداد نامحدود جواز برای هر ولایت پشتیبانی می‌کند.
د هر ولایت لپاره له نامحدوده شمېر جوازونو ملاتړ کوي.

### ۴. استانداردسازی / معیاري کول
از بهترین شیوه‌های بین‌المللی پیروی می‌کند.
له نړیوالو غوره طریقو څخه پیروي کوي.

### ۵. کارایی پایگاه داده / د ډیټابیس اغیزمنتیا
برای جستجوهای سریع فهرست‌بندی شده است.
د چټکو لټونونو لپاره فهرست شوی دی.

### ۶. کاربرپسند / کارن ملګری
فورمت واضح و قابل خواندن.
روښانه او د لوستلو وړ بڼه.

## مراحل استقرار / د ځای پر ځای کولو مرحلې

### ۱. استقرار Backend / د Backend ځای پر ځای کول

```bash
# به پوشه Backend بروید
# Backend پوښې ته لاړ شئ
cd Backend

# اسکریپت SQL را اجرا کنید
# SQL سکریپټ اجرا کړئ
psql -U postgres -d your_database -f Scripts/deploy_province_license_numbering.sql

# برنامه را بسازید و راه‌اندازی مجدد کنید
# برنامه جوړه کړئ او بیا یې پیل کړئ
dotnet build
dotnet run
```

### ۲. استقرار Frontend / د Frontend ځای پر ځای کول

فایل‌های زیر را به‌روزرسانی کنید:
لاندې فایلونه تازه کړئ:

1. `Frontend/src/app/realestate/licensedetails/licensedetails.component.html`
   - منوی کشویی انتخاب ولایت اضافه کنید
   - د ولایت د ټاکلو منو اضافه کړئ

2. `Frontend/src/app/realestate/licensedetails/licensedetails.component.ts`
   - فیلد `provinceId` به فرم اضافه کنید
   - فورمې ته `provinceId` ساحه اضافه کړئ

3. `Frontend/src/app/models/LicenseDetail.ts`
   - فیلد `provinceId?: number` اضافه کنید
   - `provinceId?: number` ساحه اضافه کړئ

## API نمونه / د API بېلګه

### ایجاد جواز با شماره خودکار / د اتوماتیک شمېرې سره د جواز جوړول

**POST** `/api/LicenseDetail`

```json
{
  "companyId": 123,
  "provinceId": 1,  // کابل
  "issueDate": "1403/10/05",
  "areaId": 2,
  "officeAddress": "کابل، ناحیه ۱۰",
  "licenseType": "رهنمای معاملات",
  "licenseCategory": "جدید",
  "calendarType": "hijriShamsi"
}
```

**پاسخ / ځواب:**
```json
{
  "id": 456,
  "licenseNumber": "KBL-0235"
}
```

## آزمایش / ازموینه

### موارد آزمایشی / د ازموینې قضیې

1. **ایجاد جواز برای کابل** → باید `KBL-0001` تولید شود
   **د کابل لپاره د جواز جوړول** → باید `KBL-0001` تولید شي

2. **ایجاد جواز دوم برای کابل** → باید `KBL-0002` تولید شود
   **د کابل لپاره دویم جواز جوړول** → باید `KBL-0002` تولید شي

3. **ایجاد جواز برای کندهار** → باید `KHR-0001` تولید شود
   **د کندهار لپاره د جواز جوړول** → باید `KHR-0001` تولید شي

4. **ایجاد جواز بدون ولایت** → باید ورودی دستی مجاز باشد
   **د ولایت پرته د جواز جوړول** → باید لاسي ننوتل اجازه ولري

## رفع مشکلات / د ستونزو حل

### مشکل: شماره‌های جواز تولید نمی‌شوند
### ستونزه: د جواز شمېرې تولیدیږي نه

**راه‌حل / حل:**
1. بررسی کنید که `ProvinceId` در درخواست ارائه شده است
   وګورئ چې `ProvinceId` په غوښتنه کې ورکړل شوی دی

2. بررسی کنید که ولایت در جدول Location با TypeId = 2 وجود دارد
   وګورئ چې ولایت د Location په جدول کې د TypeId = 2 سره شتون لري

3. بررسی کنید که سرویس LicenseNumberGenerator در Program.cs ثبت شده است
   وګورئ چې د LicenseNumberGenerator خدمت په Program.cs کې ثبت شوی دی

### مشکل: شماره‌های جواز تکراری
### ستونزه: د جواز تکراري شمېرې

**راه‌حل / حل:**
1. فهرست‌های پایگاه داده ایجاد شده‌اند را بررسی کنید
   د ډیټابیس جوړ شوي فهرستونه وګورئ

2. اطمینان حاصل کنید که منطق تولید ترتیبی کار می‌کند
   ډاډ ترلاسه کړئ چې د ترتیبي تولید منطق کار کوي

## پشتیبانی / ملاتړ

برای سوالات یا مشکلات:
د پوښتنو یا ستونزو لپاره:

1. ابتدا این مستندات را بررسی کنید
   لومړی دا اسناد وګورئ

2. فایل‌های migration را مرور کنید
   د migration فایلونه وګورئ

3. با داده‌های نمونه آزمایش کنید
   د نمونې ډیټا سره ازموینه وکړئ

4. با مدیر سیستم تماس بگیرید
   د سیستم مدیر سره اړیکه ونیسئ

---

**آخرین به‌روزرسانی / وروستی تازه کول:** ۵ دلو ۱۴۰۳ / 25 جنوری 2026
**نسخه / نسخه:** 1.0
**نویسنده / لیکوال:** تیم توسعه سیستم / د سیستم پراختیا ټیم
